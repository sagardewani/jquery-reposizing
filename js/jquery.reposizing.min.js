/* ========================================================================
 * Dset: jQuery.reposizing.min.js v1.0.0
 * ========================================================================
 * Copyright 2017 Hetrotech Private Limited.
 * Licensed under MIT
 * ======================================================================== */
 if("undefined"==typeof htmlTagList)throw new Error("D-Set JavaScript requires htmlTagList.js\n Please Include it");!function(e,t){"use strict";function s(e){new g(e)}function n(e,t){switch(t){case"static":return"0px"==e.css("margin-left")?0:e.css("margin-left");default:return 0==e.css("left")?0:e.css("left")}}function d(e,t){switch(t){case"static":return"0px"==e.css("margin-top")?0:e.css("margin-top");default:return 0==e.css("top")?0:e.css("top")}}function i(e){return!!e.parent().is("div")}function l(){var t,s=document.createElement("div"),n=document.createElement("form"),d=[],i=[],l=document.createElement("input"),c=document.createElement("select"),a=["min","max","normal"],r=["height","width"];for(s.setAttribute("id","set-div"),s.setAttribute("class","d-set size-container"),n.setAttribute("id","set-form"),n.setAttribute("class","d-set form-horizontal"),t=0;t<2;t++)d[t]=document.createElement("input"),d[t].setAttribute("type","text"),d[t].setAttribute("class","d-set form-control"),d[t].setAttribute("id","set_"+r[t]),d[t].setAttribute("placeholder","Enter "+r[t]+" Here"),n.append(d[t]);for(c.setAttribute("id","type"),c.setAttribute("class","d-set form-control"),t=0;t<3;t++)i[t]=document.createElement("option"),i[t].setAttribute("class","d-set"),i[t].value=a[t],i[t].innerText=a[t].toUpperCase(),c.append(i[t]);n.append(c),l.setAttribute("type","button"),l.setAttribute("id","set-save"),l.setAttribute("class","d-set btn btn-default btn-danger"),l.value="save",n.append(l),e("body").append(s),s.append(n),0==e.fn.settings.modalCreated&&o()}function o(){e("body").append('<div id="source-container" class="modal fade d-set" role="dialog">\t\t  <div class="modal-dialog d-set">\t\t\t<div class="modal-content d-set">\t\t\t  <div class="modal-header d-set">\t\t\t\t<button type="button" class="close d-set" data-dismiss="modal">&times;</button>\t\t\t\t<h4 class="modal-title d-set">CSS Styles</h4>\t\t\t  </div>\t\t\t  <div class="modal-body d-set">\t\t\t\t<pre class="d-set"></pre>\t\t\t  </div>\t\t\t  <div class="modal-footer d-set">\t\t\t\t<button type="button" class="btn btn-default d-set" data-dismiss="modal">Close</button>\t\t\t  </div>\t\t\t</div>\t\t</div>\t\t</div>'),e.fn.settings.modalCreated=1}function c(){var e=document.createElement("style");e.setAttribute("id","d-set-element-stylesheet"),e.appendChild(document.createTextNode("")),document.head.appendChild(e)}function a(t,s){return null==t.data("e_index")&&t.data("e_index",++e.fn.settings.count),t.data("e_index")}function r(t){var s=t.position,n=null,d=0;t.element.on("mousedown",function(i){i.preventDefault(),n=t.element,d=1,n.addClass("dragging");var l=n.outerHeight(),o=n.outerWidth(),c=n.offset().top+l-i.pageY,a=n.offset().left+o-i.pageX,r=i.pageX,f=i.pageY,m=parseInt(n.css("margin-top")),u=parseInt(n.css("margin-left"));e(document).on("mousemove",function(e){d&&("static"==s?(n.css("margin-top",e.pageY-f+m),n.css("margin-left",e.pageX-r+u)):n.offset({top:e.pageY+c-l,left:e.pageX+a-o}))}).on("mouseup",function(t){e(this).off("mousemove")})}).on("mouseup",function(e){n&&(d=0,n.removeClass("dragging"),n=null)})}function f(){var t=document.createElement("div"),s=document.createElement("ul"),n=document.createElement("a");n.setAttribute("href","javascript:void(0);"),n.setAttribute("onClick","toggleShow("+t+")"),n.setAttribute("class","pull-right"),t.setAttribute("id","cmdListContainer"),t.setAttribute("class","d-set cmdsList style-4 hide"),s.setAttribute("id","cmdList"),s.innerHTML="<header>Commands List</header>",s.setAttribute("class","d-set"),s.style.background="#e7e7e7",e(t).append(n),e(t).append(s),e("body").append(t),e.fn.settings.commands.created=1}function m(e){var t=e.index,s=e.tagName;return"undefined"!=t&&"e-set-element-"+s+"-"+t}function u(e){var t=m(e);return t&&!e.element.hasClass(t)&&e.element[0].classList.add(t),t}var p={},g=function(s){p.w=e("body").width(),p.h=e("body").height(),p.center={x:p.w/2,y:p.h/2},c(),l(),e.fn.settings.commands.created||f(),this.keys=e.extend({},e.fn.reposizing.defaults,s),this.previous;var n=this;this.$selected={element:"undefined",width:"undefined",height:"undefined",left:"undefined",top:"undefined",scale:"px",tagName:"undefined",drag:"undefined",position:"undefined",maxWidth:"undefined",minWidth:"undefined",maxHeight:"undefined",minHeight:"undefined",inside:"undefined",index:"undefined",class:"undefined",keydown:{37:function(){n.$selected.width=n.$selected.element.width(),n.$selected.width>1&&n.$selected.element.width(n.$selected.width-1)},39:function(){n.$selected.width=n.$selected.element.width(),n.$selected.width<p.w&&n.$selected.element.width(n.$selected.width+1)},38:function(){n.$selected.height=n.$selected.element.height(),n.$selected.height>1&&n.$selected.element.height(n.$selected.height-1)},40:function(){n.$selected.height=n.$selected.element.height(),n.$selected.element.height(n.$selected.height+1)}},move:{37:function(){"relative"==n.$selected.position||"absolute"==n.$selected.position||"fixed"==n.$selected.position?(n.$selected.left=n.$selected.element.position().left,n.$selected.element.css("left",n.$selected.left-1+n.$selected.scale)):(n.$selected.left=parseInt(n.$selected.element.css("margin-left")),n.$selected.element.css("margin-left",n.$selected.left-1+n.$selected.scale))},39:function(){"relative"==n.$selected.position||"absolute"==n.$selected.position||"fixed"==n.$selected.position?(n.$selected.left=n.$selected.element.position().left,n.$selected.element.css("left",n.$selected.left+1+n.$selected.scale)):(n.$selected.left=parseInt(n.$selected.element.css("margin-left")),n.$selected.element.css("margin-left",n.$selected.left+1+n.$selected.scale))},38:function(){"relative"==n.$selected.position||"absolute"==n.$selected.position||"fixed"==n.$selected.position?(n.$selected.top=n.$selected.element.position().top,n.$selected.element.css("top",n.$selected.top-1+n.$selected.scale)):(n.$selected.top=parseInt(n.$selected.element.css("margin-top")),n.$selected.element.css("margin-top",n.$selected.top-1+n.$selected.scale))},40:function(){"relative"==n.$selected.position||"absolute"==n.$selected.position||"fixed"==n.$selected.position?(n.$selected.top=n.$selected.element.position().top,n.$selected.element.css("top",n.$selected.top+1+n.$selected.scale)):(n.$selected.top=parseInt(n.$selected.element.css("margin-top")),n.$selected.element.css("margin-top",n.$selected.top+1+n.$selected.scale))}}},e(t).on("click",e.proxy(this.onSelect,this)).off("keydown",e.fn.settings.onKeyDown).on("keydown",e.proxy(e.fn.settings.onKeyDown,this)).on("keydown",e.proxy(e.fn.settings.onRepoKeyDown,this)),e("#set-save").on("click",e.proxy(this.onSave,this)),e.fn.settings.commands.common(),e.fn.settings.commands.reposizing()};g.VERSION="1.0.0",g.pluginName="REPOSIZING",g.AUTHOR="Sagar Dewani",g.WEBSITE="http://www.hetrotech.in/",e.fn.reposizing=function(e){return s(e)},t.$.reposizing=e.fn.reposizing;var h={disableSelect:[e("body"),e("#wrapper"),e("html"),e("option")],defSetting:{reposizing:0,draggable:0,position:0},count:0,modalCreated:0,commands:{common:function(){var t,s,n=["alt+shift+ctrl","ctrl+m","ENTER"],d=["to go back to normal mode","to check which mode is active","to view the source generated"];for(t=0;t<n.length;t++)s="<li class='d-set'><pre class='d-set'><code class='d-set'><i class='d-set'>"+n[t]+"</i> : "+d[t]+"</code></pre></li>",e("#cmdList").append(s)},reposizing:function(){var t,s,n=["shift+r","shift+d","shift+p","&larr;","&rarr;","&uarr;","&darr;"],d=["to (de)activate hover reposizing mode","to (de)activate draggable mode","to (de)activate position mode","to decrease element width or to move element left","to increase element width or to move element right ","to decrease element height or to move element up","to increase element height or to move element down"];for(t=0;t<n.length;t++)s="<li class='d-set'><pre class='d-set'><code class='d-set'><i class='d-set'>"+n[t]+"</i> : "+d[t]+"</code></pre></li>",e("#cmdList").append(s)},created:0},onKeyDown:function(t){var s=this;if("undefined"!==s.$selected.element){if(t.shiftKey&&t.ctrlKey&&t.altKey)for(var n in e.fn.settings.defSetting)e.fn.settings.defSetting.hasOwnProperty(n)&&(e.fn.settings.defSetting[n]=0);if(t.ctrlKey&&t.which==s.keys.modeKey){var d="normal";for(var n in e.fn.settings.defSetting)e.fn.settings.defSetting.hasOwnProperty(n)&&1==e.fn.settings.defSetting[n]&&(d=n);alert("Activated Mode: "+d)}if(t.which==s.keys.sourceKey)if(e.fn.settings.defSetting.transition){e(".modal-body>pre").empty();var i,l,o=e("style#d-set-stylesheet")[0].sheet?e("style#d-set-stylesheet")[0].sheet:e("style#d-set-stylesheet")[0].styleSheet,c=o.rules?o.rules:o.cssRules,a=(c.length,c.length),r=s.$selected.element.attr("class").split(" ");for(i=0;i<a;i++)l=c[i].selectorText.replace(".",""),r.indexOf(l)>-1?e(".modal-body>pre").append("<code class=d-set style='background-color:#7fdfde;'>"+c[i].cssText+"</code><br/>"):e(".modal-body>pre").append("<code class=d-set>"+c[i].cssText+"</code><br/>");e("#source-container").modal("show")}else(e.fn.settings.defSetting.colorify||e.fn.settings.defSetting.reposizing)&&(e(".modal-body>pre").empty(),e(".modal-body>pre").append("<code class=d-set>"+s.$selected.element.attr("style")+"</code><br/>"),e("#source-container").modal("show"))}t.altKey&&"72"==t.which&&e("#cmdListContainer").toggleClass("hide")},onRepoKeyDown:function(t){var s=this;if("undefined"!==s.$selected.element){if(t.shiftKey&&t.which==s.keys.reposizingKey){for(var n in e.fn.settings.defSetting)e.fn.settings.defSetting.hasOwnProperty(n)&&e.fn.settings.defSetting.reposizing||(e.fn.settings.defSetting[n]=0);e.fn.settings.defSetting.reposizing=0==e.fn.settings.defSetting.reposizing?1:0}e.fn.settings.defSetting.reposizing&&(t.shiftKey&&"68"==t.which&&(e.fn.settings.defSetting.position=0,e.fn.settings.defSetting.draggable=0==e.fn.settings.defSetting.draggable?1:0),t.shiftKey&&"80"==t.which&&(e.fn.settings.defSetting.draggable=0,e.fn.settings.defSetting.position=0==e.fn.settings.defSetting.position?1:0),"39"!=t.which&&"37"!=t.which&&"38"!=t.which&&"40"!=t.which||(e.fn.settings.defSetting.position?s.$selected.move[t.which]():s.$selected.keydown[t.which]()),t.shiftKey&&t.altKey&&"83"==t.which&&(s.$selected.scale="px"==s.$selected.scale?"%":"px"))}}};e.fn.settings=e.extend(!0,{},e.fn.settings||{},h),e.fn.reposizing.defaults={reposizingKey:"82",modeKey:"77",sourceKey:"13"},g.prototype.onSelect=function(t){var s,l=this,o=e.fn.settings.disableSelect,c=o.length;for(s=0;s<c;s++)if(e(t.target).is(o[s]))return;e(t.target).is('[class*="d-set"]')||(l.previous&&"off"!=l.$selected.drag&&l.previous.hasClass("ui-draggable")&&l.previous.draggable("destroy"),l.$selected.element=e(t.target),l.$selected.maxWidth="undefined"!=l.$selected.element?"none"==l.$selected.element.css("maxWidth")?"undefined":l.$selected.element.css("maxWidth"):"undefined",l.$selected.minWidth="undefined"!=l.$selected.element?"0px"==l.$selected.element.css("minWidth")?"undefined":l.$selected.element.css("minWidth"):"undefined",l.$selected.maxHeight="undefined"!=l.$selected.element?"none"==l.$selected.element.css("maxHeight")?"undefined":l.$selected.element.css("maxHeight"):"undefined",l.$selected.minHeight="undefined"!=l.$selected.element?"0px"==l.$selected.element.css("minHeight")?"undefined":l.$selected.element.css("minHeight"):"undefined",l.$selected.height="undefined"!=l.$selected.element?"0px"==l.$selected.element.css("height")?"undefined":l.$selected.element.css("height"):"undefined",l.$selected.width="undefined"!=l.$selected.element?"none"==l.$selected.element.css("width")?"undefined":l.$selected.element.css("width"):"undefined",l.$selected.position="undefined"!=l.$selected.element?"static"==l.$selected.element.css("position")?"static":l.$selected.element.css("position"):"undefined",l.$selected.left="undefined"!=l.$selected.element?"static"==l.$selected.element.css("position")?n(l.$selected.element,"static"):n(l.$selected.element,"other"):"undefined",l.$selected.top="undefined"!=l.$selected.element?"static"==l.$selected.element.css("position")?d(l.$selected.element,"static"):d(l.$selected.element,"other"):"undefined",l.$selected.tagName="undefined"!=l.$selected.element?l.$selected.element[0].tagName.toLowerCase():"undefined",l.$selected.drag="undefined"!=l.$selected.element?1==e.fn.settings.defSetting.draggable?r(l.$selected):"off":"undefiend",l.$selected.inside="undefined"!=l.$selected.element?i(l.$selected.element):"undefined",l.$selected.index="undefined"!=l.$selected.element?a(l.$selected.element):"undefined",l.$selected.class="undefined"!=l.$selected.element?u(l.$selected):"undefined",l.$selected.element&&(l.previous&&l.previous.hasClass("border-blue")&&l.previous.removeClass("border-blue"),l.previous=l.$selected.element,l.previous.addClass("border-blue")))},g.prototype.onSave=function(t){t.preventDefault();var s=e("#set_width").val(),n=e("#set_height").val(),d=e("#type option:selected").val(),i=this,l=/^[0-9]*(px|%|em|auto)$/;return"undefined"===i.$selected.element?alert("no element selected\nSelect element to resize"):l.test(s)&&l.test(n)?(s&&n&&"max"==d?(i.previous.css("max-width",s),i.previous.css("max-height",n)):s&&n&&"min"===d?(i.previous.css("min-width",s),i.previous.css("min-height",n)):s&&n&&"normal"===d&&(i.previous.css("width",s),i.previous.css("height",n)),void e("form#set-form")[0].reset()):alert("please unit must be added (px or % or em)")}}(jQuery,window);