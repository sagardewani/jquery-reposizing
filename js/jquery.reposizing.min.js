/* ========================================================================
 * Dset: jQuery.reposizing.min.js v1.0.0
 * ========================================================================
 * Copyright 2017 Hetrotech Private Limited.
 * Licensed under MIT
 * ======================================================================== */
if("undefined"==typeof htmlTagList)throw new Error("D-Set JavaScript requires htmlTagList.js\n Please Include it");!function(e,t){"use strict";function s(e){new p(e)}function n(e,t){switch(t){case"static":return"0px"==e.css("margin-left")?0:e.css("margin-left");default:return 0==e.css("left")?0:e.css("left")}}function i(e,t){switch(t){case"static":return"0px"==e.css("margin-top")?0:e.css("margin-top");default:return 0==e.css("top")?0:e.css("top")}}function d(e){return!!e.parent().is("div")}function l(){var t,s=document.createElement("div"),n=document.createElement("form"),i=[],d=[],l=document.createElement("input"),c=document.createElement("select"),a=["min","max","normal"],r=["height","width"];for(s.setAttribute("id","set-div"),s.setAttribute("class","d-set size-container"),n.setAttribute("id","set-form"),n.setAttribute("class","d-set form-horizontal"),t=0;2>t;t++)i[t]=document.createElement("input"),i[t].setAttribute("type","text"),i[t].setAttribute("class","d-set form-control"),i[t].setAttribute("id","set_"+r[t]),i[t].setAttribute("placeholder","Enter "+r[t]+" Here"),n.append(i[t]);for(c.setAttribute("id","type"),c.setAttribute("class","d-set form-control"),t=0;3>t;t++)d[t]=document.createElement("option"),d[t].setAttribute("class","d-set"),d[t].value=a[t],d[t].innerText=a[t].toUpperCase(),c.append(d[t]);n.append(c),l.setAttribute("type","button"),l.setAttribute("id","set-save"),l.setAttribute("class","d-set btn btn-default btn-danger"),l.value="save",n.append(l),e("body").append(s),s.append(n),0==e.fn.settings.modalCreated&&o()}function o(){var t='<div id="source-container" class="modal fade d-set" role="dialog">		  <div class="modal-dialog d-set">			<div class="modal-content d-set">			  <div class="modal-header d-set">				<button type="button" class="close d-set" data-dismiss="modal">&times;</button>				<h4 class="modal-title d-set">CSS Styles</h4>			  </div>			  <div class="modal-body d-set">				<pre class="d-set"></pre>			  </div>			  <div class="modal-footer d-set">				<button type="button" class="btn btn-default d-set" data-dismiss="modal">Close</button>			  </div>			</div>		</div>		</div>';e("body").append(t),e.fn.settings.modalCreated=1}function c(){var e=document.createElement("style");e.setAttribute("id","d-set-element-stylesheet"),e.appendChild(document.createTextNode("")),document.head.appendChild(e)}function a(t){return null==t.data("e_index")&&t.data("e_index",++e.fn.settings.count),t.data("e_index")}function r(t){var s=t.position,n=null,i=0;t.element.on("mousedown",function(d){d.preventDefault(),n=t.element,i=1,n.addClass("dragging");var l=n.outerHeight(),o=n.outerWidth(),c=n.offset().top+l-d.pageY,a=n.offset().left+o-d.pageX,r=d.pageX,f=d.pageY,m=parseInt(n.css("margin-top")),u=parseInt(n.css("margin-left"));e(document).on("mousemove",function(e){i&&("static"==s?(n.css("margin-top",e.pageY-f+m),n.css("margin-left",e.pageX-r+u)):n.offset({top:e.pageY+c-l,left:e.pageX+a-o}))}).on("mouseup",function(){e(this).off("mousemove")})}).on("mouseup",function(){n&&(i=0,n.removeClass("dragging"),n=null)})}function f(e){var t=e.index,s=e.tagName;if("undefined"==t)return!1;var n="e-set-element-"+s+"-"+t;return n}function m(e){var t=f(e);return t&&!e.element.hasClass(t)&&e.element[0].classList.add(t),t}var u={},p=function(s){u.w=e("body").width(),u.h=e("body").height(),u.center={x:u.w/2,y:u.h/2},c(),l(),this.keys=e.extend({},e.fn.reposizing.defaults,s),this.previous;var n=this;this.$selected={element:"undefined",width:"undefined",height:"undefined",left:"undefined",top:"undefined",scale:"px",tagName:"undefined",drag:"undefined",position:"undefined",maxWidth:"undefined",minWidth:"undefined",maxHeight:"undefined",minHeight:"undefined",inside:"undefined",index:"undefined","class":"undefined",keydown:{37:function(){n.$selected.width=n.$selected.element.width(),n.$selected.width>1&&n.$selected.element.width(n.$selected.width-1)},39:function(){n.$selected.width=n.$selected.element.width(),n.$selected.width<u.w&&n.$selected.element.width(n.$selected.width+1)},38:function(){n.$selected.height=n.$selected.element.height(),n.$selected.height>1&&n.$selected.element.height(n.$selected.height-1)},40:function(){n.$selected.height=n.$selected.element.height(),n.$selected.element.height(n.$selected.height+1)}},move:{37:function(){"relative"==n.$selected.position||"absolute"==n.$selected.position||"fixed"==n.$selected.position?(n.$selected.left=n.$selected.element.position().left,n.$selected.element.css("left",n.$selected.left-1+n.$selected.scale)):(n.$selected.left=parseInt(n.$selected.element.css("margin-left")),n.$selected.element.css("margin-left",n.$selected.left-1+n.$selected.scale))},39:function(){"relative"==n.$selected.position||"absolute"==n.$selected.position||"fixed"==n.$selected.position?(n.$selected.left=n.$selected.element.position().left,n.$selected.element.css("left",n.$selected.left+1+n.$selected.scale)):(n.$selected.left=parseInt(n.$selected.element.css("margin-left")),n.$selected.element.css("margin-left",n.$selected.left+1+n.$selected.scale))},38:function(){"relative"==n.$selected.position||"absolute"==n.$selected.position||"fixed"==n.$selected.position?(n.$selected.top=n.$selected.element.position().top,n.$selected.element.css("top",n.$selected.top-1+n.$selected.scale)):(n.$selected.top=parseInt(n.$selected.element.css("margin-top")),n.$selected.element.css("margin-top",n.$selected.top-1+n.$selected.scale))},40:function(){"relative"==n.$selected.position||"absolute"==n.$selected.position||"fixed"==n.$selected.position?(n.$selected.top=n.$selected.element.position().top,n.$selected.element.css("top",n.$selected.top+1+n.$selected.scale)):(n.$selected.top=parseInt(n.$selected.element.css("margin-top")),n.$selected.element.css("margin-top",n.$selected.top+1+n.$selected.scale))}}},e(t).on("click",e.proxy(this.onSelect,this)).off("keydown",e.fn.settings.onKeyDown).on("keydown",e.proxy(e.fn.settings.onKeyDown,this)).on("keydown",e.proxy(e.fn.settings.onRepoKeyDown,this)),e("#set-save").on("click",e.proxy(this.onSave,this)),e.fn.settings.commands.common(),e.fn.settings.commands.reposizing()};p.VERSION="1.0.0",p.pluginName="REPOSIZING",p.AUTHOR="Sagar Dewani",p.WEBSITE="http://www.hetrotech.in/",e.fn.reposizing=function(e){return s(e)},t.$.reposizing=e.fn.reposizing;var g={disableSelect:[e("body"),e("#wrapper"),e("html"),e("option")],defSetting:{reposizing:0,draggable:0,position:0},count:0,modalCreated:0,commands:{common:function(){var t,s,n=["alt+shift+ctrl","ctrl+m","ENTER"],i=["to go back to normal mode","to check which mode is active","to view the source generated"];for(t=0;t<n.length;t++)s="<li class='d-set'><pre class='d-set'><code class='d-set'><i class='d-set'>"+n[t]+"</i> : "+i[t]+"</code></pre></li>",e("#cmdList").append(s)},reposizing:function(){var t,s,n=["shift+r","shift+d","shift+p","ctrl+b","&larr;","&rarr;","&uarr;","&darr;"],i=["to (de)activate hover reposizing mode","to (de)activate draggable mode","to (de)activate position mode","beautify element","to decrease element width or to move element left","to increase element width or to move element right ","to decrease element height or to move element up","to increase element height or to move element down"];for(t=0;t<n.length;t++)s="<li class='d-set'><pre class='d-set'><code class='d-set'><i class='d-set'>"+n[t]+"</i> : "+i[t]+"</code></pre></li>",e("#cmdList").append(s)}},onKeyDown:function(t){var s=this;if("undefined"!==s.$selected.element){if(t.shiftKey&&t.ctrlKey&&t.altKey)for(var n in e.fn.settings.defSetting)e.fn.settings.defSetting.hasOwnProperty(n)&&(e.fn.settings.defSetting[n]=0);if(t.ctrlKey&&t.which==s.keys.modeKey){var i="normal";for(var n in e.fn.settings.defSetting)e.fn.settings.defSetting.hasOwnProperty(n)&&1==e.fn.settings.defSetting[n]&&(i=n);alert("Activated Mode: "+i)}if(t.which==s.keys.sourceKey)if(e.fn.settings.defSetting.transition){e(".modal-body>pre").empty();var d,l,o=e("style#d-set-stylesheet")[0].sheet?e("style#d-set-stylesheet")[0].sheet:e("style#d-set-stylesheet")[0].styleSheet,c=o.rules?o.rules:o.cssRules,a=c.length?c.length:c.length,r=s.$selected.element.attr("class").split(" ");for(d=0;a>d;d++)l=c[d].selectorText.replace(".",""),r.indexOf(l)>-1?e(".modal-body>pre").append("<code class=d-set style='background-color:#7fdfde;'>"+c[d].cssText+"</code><br/>"):e(".modal-body>pre").append("<code class=d-set>"+c[d].cssText+"</code><br/>");e("#source-container").modal("show")}else(e.fn.settings.defSetting.colorify||e.fn.settings.defSetting.reposizing)&&(e(".modal-body>pre").empty(),e(".modal-body>pre").append("<code class=d-set>"+s.$selected.element.attr("style")+"</code><br/>"),e("#source-container").modal("show"))}t.altKey&&"72"==t.which&&e("#cmdListContainer").toggleClass("hide")},onRepoKeyDown:function(t){var s=this;if("undefined"!==s.$selected.element){if(t.shiftKey&&t.which==s.keys.reposizingKey){for(var n in e.fn.settings.defSetting)e.fn.settings.defSetting.hasOwnProperty(n)&&e.fn.settings.defSetting.reposizing||(e.fn.settings.defSetting[n]=0);e.fn.settings.defSetting.reposizing=0==e.fn.settings.defSetting.reposizing?1:0}e.fn.settings.defSetting.reposizing&&(t.shiftKey&&"68"==t.which&&(e.fn.settings.defSetting.position=0,e.fn.settings.defSetting.draggable=0==e.fn.settings.defSetting.draggable?1:0),t.shiftKey&&"80"==t.which&&(e.fn.settings.defSetting.draggable=0,e.fn.settings.defSetting.position=0==e.fn.settings.defSetting.position?1:0),"39"!=t.which&&"37"!=t.which&&"38"!=t.which&&"40"!=t.which||(e.fn.settings.defSetting.position?s.$selected.move[t.which]():s.$selected.keydown[t.which]()),t.shiftKey&&t.altKey&&"83"==t.which&&(s.$selected.scale="px"==s.$selected.scale?"%":"px"))}}};e.fn.settings=e.extend(!0,{},e.fn.settings||{},g),e.fn.reposizing.defaults={reposizingKey:"82",modeKey:"77",sourceKey:"13"},p.prototype.onSelect=function(t){var s,l=this,o=e.fn.settings.disableSelect,c=o.length;for(s=0;c>s;s++)if(e(t.target).is(o[s]))return;e(t.target).is('[class*="d-set"]')||(l.previous&&"off"!=l.$selected.drag&&l.previous.hasClass("ui-draggable")&&l.previous.draggable("destroy"),l.$selected.element=e(t.target),l.$selected.maxWidth="undefined"!=l.$selected.element?"none"==l.$selected.element.css("maxWidth")?"undefined":l.$selected.element.css("maxWidth"):"undefined",l.$selected.minWidth="undefined"!=l.$selected.element?"0px"==l.$selected.element.css("minWidth")?"undefined":l.$selected.element.css("minWidth"):"undefined",l.$selected.maxHeight="undefined"!=l.$selected.element?"none"==l.$selected.element.css("maxHeight")?"undefined":l.$selected.element.css("maxHeight"):"undefined",l.$selected.minHeight="undefined"!=l.$selected.element?"0px"==l.$selected.element.css("minHeight")?"undefined":l.$selected.element.css("minHeight"):"undefined",l.$selected.height="undefined"!=l.$selected.element?"0px"==l.$selected.element.css("height")?"undefined":l.$selected.element.css("height"):"undefined",l.$selected.width="undefined"!=l.$selected.element?"none"==l.$selected.element.css("width")?"undefined":l.$selected.element.css("width"):"undefined",l.$selected.position="undefined"!=l.$selected.element?"static"==l.$selected.element.css("position")?"static":l.$selected.element.css("position"):"undefined",l.$selected.left="undefined"!=l.$selected.element?"static"==l.$selected.element.css("position")?n(l.$selected.element,"static"):n(l.$selected.element,"other"):"undefined",l.$selected.top="undefined"!=l.$selected.element?"static"==l.$selected.element.css("position")?i(l.$selected.element,"static"):i(l.$selected.element,"other"):"undefined",l.$selected.tagName="undefined"!=l.$selected.element?l.$selected.element[0].tagName.toLowerCase():"undefined",l.$selected.drag="undefined"!=l.$selected.element?1==e.fn.settings.defSetting.draggable?r(l.$selected):"off":"undefiend",l.$selected.inside="undefined"!=l.$selected.element?d(l.$selected.element):"undefined",l.$selected.index="undefined"!=l.$selected.element?a(l.$selected.element):"undefined",l.$selected["class"]="undefined"!=l.$selected.element?m(l.$selected):"undefined",l.$selected.element&&(l.previous&&l.previous.hasClass("border-blue")&&l.previous.removeClass("border-blue"),l.previous=l.$selected.element,l.previous.addClass("border-blue")))},p.prototype.onSave=function(t){t.preventDefault();var s=e("#set_width").val(),n=e("#set_height").val(),i=e("#type option:selected").val(),d=this,l=/^[0-9]*(px|%|em|auto)$/;return"undefined"===d.$selected.element?alert("no element selected\nSelect element to resize"):l.test(s)&&l.test(n)?(s&&n&&"max"==i?(d.previous.css("max-width",s),d.previous.css("max-height",n)):s&&n&&"min"===i?(d.previous.css("min-width",s),d.previous.css("min-height",n)):s&&n&&"normal"===i&&(d.previous.css("width",s),d.previous.css("height",n)),void e("form#set-form")[0].reset()):alert("please unit must be added (px or % or em)")}}(jQuery,window);